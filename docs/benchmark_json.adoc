= JSON Validation Benchmark

// This file is automatically generated by `lexy_benchmark_json`.
// DO NOT MODIFY.

This benchmark measures the time it takes to *validate* JSON, i.e. to check whether it is well-formed.
Validation was chosen as opposed to parsing, as parsing speed depends on the JSON data structure as well.
Implementing an efficient JSON container is out of scope for lexy, so it would have a disadvantage over the specialized JSON libraries.

The average validation times for each input are shown in the boxplots below.
Lower values are better.

[pass]
++++
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
++++


[pass]
++++
<div id="canada.json"></div>
<script>
    var data = [
        {
            name: 'baseline',
            y: [0.0008540997, 0.000850112, 0.0008464173, 0.000843007545454545, 0.000856627272727273, 0.000841225583333333, 0.000841962166666667, 0.000869768, 0.000851406333333333, 0.000846646090909091, 0.0008432205],
        },
        {
            name: 'lexy',
            y: [0.0044755883, 0.0045023427, 0.0043780622, 0.00440312209090909, 0.00460838327272727, 0.00464784466666667, 0.004406022, 0.00439555627272727, 0.00446340083333333, 0.00464926663636364, 0.0044000378],
        },
        {
            name: 'pegtl',
            y: [0.0080815833, 0.0079901217, 0.0080812215, 0.00825185563636364, 0.00814416336363636, 0.00798073075, 0.008016172, 0.00794924681818182, 0.00800700758333333, 0.00793215754545454, 0.00850125],
        },
        {
            name: 'nlohmann/json',
            y: [0.0442748169, 0.043943014, 0.0483198599, 0.045240509, 0.0437359127272727, 0.0444823608333333, 0.0440001766666667, 0.043880535, 0.0447877881666667, 0.0451573139090909, 0.0448125323],
        },
        {
            name: 'rapidjson',
            y: [0.008247148, 0.0079926577, 0.008181031, 0.00831348081818182, 0.00811912918181818, 0.008005237, 0.00798859933333333, 0.00798625581818182, 0.00825791408333333, 0.00825140536363636, 0.0083295992],
        },
        
    ];
    var title = 'canada.json';

    data = data.map(a => Object.assign(a, { boxpoints: 'all', pointpos: 0, type: 'box' }));
    var layout = { title: { text: title }, showlegend: false, yaxis: { title: 'validation time', rangemode: 'tozero', autorange: true } };
    Plotly.newPlot('canada.json', data, layout, {responsive: true});
</script>
++++
    
[pass]
++++
<div id="citm_catalog.json"></div>
<script>
    var data = [
        {
            name: 'baseline',
            y: [0.0007469967, 0.0006571083, 0.000753545, 0.000712402090909091, 0.000646863545454545, 0.000639354083333333, 0.000667363833333333, 0.000677045181818182, 0.000641219333333333, 0.000664481, 0.000654414],
        },
        {
            name: 'lexy',
            y: [0.0072985758, 0.0071857969, 0.007280415, 0.00757197872727273, 0.00754140063636364, 0.00739137616666667, 0.00718593291666667, 0.00722613354545455, 0.007440515, 0.00743942827272727, 0.0072191565],
        },
        {
            name: 'pegtl',
            y: [0.0085660938, 0.0082390797, 0.0082213085, 0.00812693045454545, 0.00835489154545455, 0.00841509316666667, 0.0081950215, 0.00818440190909091, 0.00812066375, 0.00851602618181818, 0.0081848878],
        },
        {
            name: 'nlohmann/json',
            y: [0.0149441682, 0.0150123542, 0.0151910398, 0.0157593916363636, 0.0148920230909091, 0.0153001885833333, 0.015187446, 0.0148707077272727, 0.0150249920833333, 0.0160405817272727, 0.0150339725],
        },
        {
            name: 'rapidjson',
            y: [0.003901532, 0.0041655534, 0.0040977744, 0.00389150336363636, 0.00385795409090909, 0.00398265058333333, 0.00393892508333333, 0.00400363709090909, 0.00388840916666667, 0.00391163554545455, 0.0038948426],
        },
        
    ];
    var title = 'citm_catalog.json';

    data = data.map(a => Object.assign(a, { boxpoints: 'all', pointpos: 0, type: 'box' }));
    var layout = { title: { text: title }, showlegend: false, yaxis: { title: 'validation time', rangemode: 'tozero', autorange: true } };
    Plotly.newPlot('citm_catalog.json', data, layout, {responsive: true});
</script>
++++
    
[pass]
++++
<div id="twitter.json"></div>
<script>
    var data = [
        {
            name: 'baseline',
            y: [0.0002399405, 0.000231195, 0.0002315598, 0.000234916181818182, 0.000237466545454545, 0.000238397166666667, 0.00025080875, 0.000231510909090909, 0.000232014833333333, 0.000235402363636364, 0.0002425798],
        },
        {
            name: 'lexy',
            y: [0.0023641644, 0.0023540256, 0.0023564043, 0.00230241636363636, 0.00238025990909091, 0.0023398145, 0.00234201383333333, 0.00242788690909091, 0.00277225183333333, 0.00290044718181818, 0.0023870561],
        },
        {
            name: 'pegtl',
            y: [0.0054955824, 0.0052918248, 0.0052711247, 0.00527106736363636, 0.00531199, 0.00552536533333333, 0.00531652258333333, 0.00533686727272727, 0.00552275766666667, 0.00534390827272727, 0.0052829807],
        },
        {
            name: 'nlohmann/json',
            y: [0.0061272245, 0.0060413913, 0.0061367862, 0.00609947709090909, 0.00603873145454545, 0.00626821016666667, 0.00629778233333333, 0.00605267718181818, 0.00604594716666667, 0.00614494772727273, 0.0064225907],
        },
        {
            name: 'rapidjson',
            y: [0.0019047998, 0.001893515, 0.0018663427, 0.00185242636363636, 0.00187798172727273, 0.00185042841666667, 0.00187142825, 0.00196710618181818, 0.00188118883333333, 0.00184316409090909, 0.0018344923],
        },
        
    ];
    var title = 'twitter.json';

    data = data.map(a => Object.assign(a, { boxpoints: 'all', pointpos: 0, type: 'box' }));
    var layout = { title: { text: title }, showlegend: false, yaxis: { title: 'validation time', rangemode: 'tozero', autorange: true } };
    Plotly.newPlot('twitter.json', data, layout, {responsive: true});
</script>
++++
    
.The implementations
`baseline`::
    This simply adds all input characters of the JSON document without performing actual validation.
`lexy`::
    A JSON validator using the lexy grammar from the example.
`pegtl`::
    A JSON validator using the https://github.com/taocpp/PEGTL[PEGTL] JSON grammar.
`nlohmann/json`::
    A JSON validator using https://github.com/nlohmann/json[JSON for Modern C++] implemented by `nlohmann::json::accept()`.
`rapidjson`::
    A JSON validator using https://github.com/Tencent/rapidjson[rapidjson] implemented using a SAX parser with the `rapidjson::BaseReaderHandler`.

.The inputs
`canada.json`::
    Contains lots of 2-element arrays holding floating-point coordinate pairs.
    Taken from https://github.com/miloyip/nativejson-benchmark.
`citm_catalog.json`::
    Big JSON file with some variety.
    Taken from https://github.com/miloyip/nativejson-benchmark.
`twitter.json`::
    Some data from twitter's API.
    Taken from https://github.com/miloyip/nativejson-benchmark.

.The Methodology
The input data is read using `lexy::read_file()`.
The resulting buffer is then passed to the various implementations using their memory inputs.
Benchmarking is done by https://nanobench.ankerl.com/[nanobench] on an AMD FX-6300.
    